import gsap from "gsap";
import React from "react";
import { useRef, useEffect } from "react";

const ButtonOutline = () => {
	const textPath = useRef<SVGPathElement>(null);
	const outlinePath = useRef<SVGRectElement>(null);

	const bg = useRef<HTMLSpanElement>(null);

	gsap.timeline()
		.to(
			textPath.current!,
			{
				y: 0,
				opacity: 1,
			},
			"+=1"
		)
		.to(
			outlinePath.current!,
			{
				duration: 3,
				strokeDashoffset: 0,
				ease: "Expo.easeOut",
			},
			"+=1"
		);

	const handleMouseOver = (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {
		gsap.to(bg.current!, {
			duration: 0.3,
			top: 0,
		});
	};

	const handleMouseLeave = (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {
		gsap.to(bg.current!, {
			duration: 0.3,
			top: "100%",
			onComplete: () => {
				gsap.to(bg.current!, {
					duration: 0,
					top: "-100%",
				});
			},
		});
	};

	const handleComplete = () => {
		bg.current!.style.top = "-100%";
	};
	return (
		<button
			type="button"
			className="cursor-none order-2 sm:order-1 relative bg-white rounded-3xl overflow-hidden"
			onMouseOver={(event) => handleMouseOver(event)}
			onMouseLeave={(event) => handleMouseLeave(event)}
		>
			<svg
				width="130"
				height="39"
				viewBox="0 0 130 39"
				fill="none"
				xmlns="http://www.w3.org/2000/svg"
			>
				<path
					className="btn-text-svg -translate-y-3 opacity-0 "
					d="M35.876 23.628C36.1533 23.628 36.3827 23.7187 36.564 23.9C36.756 24.0707 36.852 24.2947 36.852 24.572C36.852 24.8387 36.756 25.0627 36.564 25.244C36.3827 25.4147 36.1533 25.5 35.876 25.5H30.676C30.3987 25.5 30.164 25.4093 29.972 25.228C29.7907 25.036 29.7 24.8013 29.7 24.524V15.276C29.7 14.9987 29.796 14.7693 29.988 14.588C30.18 14.396 30.4253 14.3 30.724 14.3C30.98 14.3 31.204 14.396 31.396 14.588C31.5987 14.7693 31.7 14.9987 31.7 15.276V23.9L31.348 23.628H35.876ZM42.5564 25.66C41.6497 25.66 40.8604 25.4733 40.1884 25.1C39.527 24.716 39.015 24.1987 38.6524 23.548C38.3004 22.8973 38.1244 22.1613 38.1244 21.34C38.1244 20.38 38.3164 19.564 38.7004 18.892C39.095 18.2093 39.607 17.6867 40.2364 17.324C40.8657 16.9613 41.5324 16.78 42.2364 16.78C42.7804 16.78 43.2924 16.892 43.7724 17.116C44.263 17.34 44.695 17.6493 45.0684 18.044C45.4417 18.428 45.735 18.876 45.9484 19.388C46.1724 19.9 46.2844 20.444 46.2844 21.02C46.2737 21.276 46.1724 21.484 45.9804 21.644C45.7884 21.804 45.5644 21.884 45.3084 21.884H39.1964L38.7164 20.284H44.5884L44.2364 20.604V20.172C44.215 19.8627 44.103 19.5853 43.9004 19.34C43.7084 19.0947 43.463 18.9027 43.1644 18.764C42.8764 18.6147 42.567 18.54 42.2364 18.54C41.9164 18.54 41.6177 18.5827 41.3404 18.668C41.063 18.7533 40.823 18.8973 40.6204 19.1C40.4177 19.3027 40.2577 19.5747 40.1404 19.916C40.023 20.2573 39.9644 20.6893 39.9644 21.212C39.9644 21.788 40.0817 22.2787 40.3164 22.684C40.5617 23.0787 40.871 23.3827 41.2444 23.596C41.6284 23.7987 42.0337 23.9 42.4604 23.9C42.855 23.9 43.1697 23.868 43.4044 23.804C43.639 23.74 43.8257 23.6653 43.9644 23.58C44.1137 23.484 44.247 23.404 44.3644 23.34C44.5564 23.244 44.7377 23.196 44.9084 23.196C45.143 23.196 45.335 23.276 45.4844 23.436C45.6444 23.596 45.7244 23.7827 45.7244 23.996C45.7244 24.284 45.575 24.5453 45.2764 24.78C44.999 25.0147 44.6097 25.2227 44.1084 25.404C43.607 25.5747 43.0897 25.66 42.5564 25.66ZM48.0579 17.1H51.8499C52.1059 17.1 52.3192 17.1853 52.4899 17.356C52.6605 17.5267 52.7459 17.74 52.7459 17.996C52.7459 18.2413 52.6605 18.4493 52.4899 18.62C52.3192 18.78 52.1059 18.86 51.8499 18.86H48.0579C47.8019 18.86 47.5885 18.7747 47.4179 18.604C47.2472 18.4333 47.1619 18.22 47.1619 17.964C47.1619 17.7187 47.2472 17.516 47.4179 17.356C47.5885 17.1853 47.8019 17.1 48.0579 17.1ZM49.7699 15.1C50.0472 15.1 50.2712 15.196 50.4419 15.388C50.6232 15.5693 50.7139 15.7987 50.7139 16.076V23.196C50.7139 23.3453 50.7405 23.468 50.7939 23.564C50.8579 23.66 50.9379 23.7293 51.0339 23.772C51.1405 23.8147 51.2525 23.836 51.3699 23.836C51.4979 23.836 51.6152 23.8147 51.7219 23.772C51.8285 23.7187 51.9512 23.692 52.0899 23.692C52.2392 23.692 52.3725 23.7613 52.4899 23.9C52.6179 24.0387 52.6819 24.2307 52.6819 24.476C52.6819 24.7747 52.5165 25.02 52.1859 25.212C51.8659 25.404 51.5192 25.5 51.1459 25.5C50.9219 25.5 50.6712 25.484 50.3939 25.452C50.1272 25.4093 49.8712 25.3187 49.6259 25.18C49.3912 25.0307 49.1939 24.8067 49.0339 24.508C48.8739 24.2093 48.7939 23.7987 48.7939 23.276V16.076C48.7939 15.7987 48.8845 15.5693 49.0659 15.388C49.2579 15.196 49.4925 15.1 49.7699 15.1ZM54.2688 15.068C54.3221 14.556 54.5994 14.3 55.1008 14.3H55.5968C55.8954 14.3 56.1034 14.3853 56.2208 14.556C56.3381 14.716 56.3488 14.9347 56.2528 15.212L55.1648 18.556C55.0368 18.908 54.8074 19.084 54.4768 19.084C54.1354 19.084 53.9808 18.8653 54.0128 18.428L54.2688 15.068ZM57.4034 24.172C57.2967 24.0227 57.2487 23.8307 57.2594 23.596C57.27 23.3613 57.4087 23.1587 57.6754 22.988C57.846 22.8813 58.0274 22.8387 58.2194 22.86C58.4114 22.8707 58.598 22.9667 58.7794 23.148C59.0887 23.4573 59.414 23.6973 59.7554 23.868C60.0967 24.0387 60.5234 24.124 61.0354 24.124C61.1954 24.1133 61.3714 24.092 61.5634 24.06C61.7554 24.0173 61.9207 23.932 62.0594 23.804C62.2087 23.6653 62.2834 23.4573 62.2834 23.18C62.2834 22.9453 62.2034 22.7587 62.0434 22.62C61.8834 22.4813 61.67 22.364 61.4034 22.268C61.1474 22.172 60.8594 22.0813 60.5394 21.996C60.2087 21.9 59.8674 21.7933 59.5154 21.676C59.174 21.5587 58.8594 21.4093 58.5714 21.228C58.2834 21.036 58.0487 20.7853 57.8674 20.476C57.686 20.1667 57.5954 19.7773 57.5954 19.308C57.5954 18.7747 57.7447 18.3213 58.0434 17.948C58.342 17.5747 58.726 17.2867 59.1954 17.084C59.6754 16.8813 60.1767 16.78 60.6994 16.78C61.03 16.78 61.3767 16.8227 61.7394 16.908C62.102 16.9827 62.4487 17.1107 62.7794 17.292C63.11 17.4627 63.3874 17.692 63.6114 17.98C63.7287 18.14 63.798 18.332 63.8194 18.556C63.8407 18.78 63.7394 18.9827 63.5154 19.164C63.3554 19.292 63.1687 19.3507 62.9554 19.34C62.742 19.3187 62.566 19.244 62.4274 19.116C62.246 18.8813 62.0007 18.6947 61.6914 18.556C61.3927 18.4173 61.046 18.348 60.6514 18.348C60.4914 18.348 60.3154 18.3693 60.1234 18.412C59.942 18.444 59.782 18.524 59.6434 18.652C59.5047 18.7693 59.4354 18.9613 59.4354 19.228C59.4354 19.4733 59.5154 19.6707 59.6754 19.82C59.8354 19.9587 60.0487 20.076 60.3154 20.172C60.5927 20.2573 60.886 20.3427 61.1954 20.428C61.5154 20.5133 61.8407 20.6147 62.1714 20.732C62.502 20.8493 62.806 21.004 63.0834 21.196C63.3607 21.388 63.5847 21.6387 63.7554 21.948C63.926 22.2467 64.0114 22.6307 64.0114 23.1C64.0114 23.644 63.8514 24.108 63.5314 24.492C63.2114 24.876 62.8114 25.1693 62.3314 25.372C61.8514 25.564 61.3607 25.66 60.8594 25.66C60.23 25.66 59.6007 25.5533 58.9714 25.34C58.342 25.116 57.8194 24.7267 57.4034 24.172ZM74.0545 25.5C73.7558 25.5 73.5105 25.4093 73.3185 25.228C73.1265 25.036 73.0305 24.8013 73.0305 24.524V15.244H75.1105V24.524C75.1105 24.8013 75.0092 25.036 74.8065 25.228C74.6145 25.4093 74.3638 25.5 74.0545 25.5ZM70.5185 16.14C70.2412 16.14 70.0065 16.0547 69.8145 15.884C69.6332 15.7133 69.5425 15.4893 69.5425 15.212C69.5425 14.9347 69.6332 14.716 69.8145 14.556C70.0065 14.3853 70.2412 14.3 70.5185 14.3H77.6225C77.8998 14.3 78.1292 14.3853 78.3105 14.556C78.5025 14.7267 78.5985 14.9507 78.5985 15.228C78.5985 15.5053 78.5025 15.7293 78.3105 15.9C78.1292 16.06 77.8998 16.14 77.6225 16.14H70.5185ZM85.5324 16.78C85.8097 16.78 86.039 16.8707 86.2204 17.052C86.4017 17.2333 86.4924 17.468 86.4924 17.756V24.524C86.4924 24.8013 86.4017 25.036 86.2204 25.228C86.039 25.4093 85.8097 25.5 85.5324 25.5C85.255 25.5 85.0257 25.4093 84.8444 25.228C84.663 25.036 84.5724 24.8013 84.5724 24.524V23.74L84.9244 23.884C84.9244 24.0227 84.8497 24.1933 84.7004 24.396C84.551 24.588 84.3484 24.78 84.0924 24.972C83.8364 25.164 83.5324 25.3293 83.1804 25.468C82.839 25.596 82.4657 25.66 82.0604 25.66C81.3244 25.66 80.6577 25.4733 80.0604 25.1C79.463 24.716 78.9884 24.1933 78.6364 23.532C78.295 22.86 78.1244 22.092 78.1244 21.228C78.1244 20.3533 78.295 19.5853 78.6364 18.924C78.9884 18.252 79.4577 17.7293 80.0444 17.356C80.631 16.972 81.2817 16.78 81.9964 16.78C82.455 16.78 82.8764 16.8493 83.2604 16.988C83.6444 17.1267 83.975 17.3027 84.2524 17.516C84.5404 17.7293 84.759 17.948 84.9084 18.172C85.0684 18.3853 85.1484 18.5667 85.1484 18.716L84.5724 18.924V17.756C84.5724 17.4787 84.663 17.2493 84.8444 17.068C85.0257 16.876 85.255 16.78 85.5324 16.78ZM82.3004 23.9C82.7697 23.9 83.1804 23.7827 83.5324 23.548C83.8844 23.3133 84.1564 22.9933 84.3484 22.588C84.551 22.1827 84.6524 21.7293 84.6524 21.228C84.6524 20.716 84.551 20.2573 84.3484 19.852C84.1564 19.4467 83.8844 19.1267 83.5324 18.892C83.1804 18.6573 82.7697 18.54 82.3004 18.54C81.8417 18.54 81.4364 18.6573 81.0844 18.892C80.7324 19.1267 80.455 19.4467 80.2524 19.852C80.0604 20.2573 79.9644 20.716 79.9644 21.228C79.9644 21.7293 80.0604 22.1827 80.2524 22.588C80.455 22.9933 80.7324 23.3133 81.0844 23.548C81.4364 23.7827 81.8417 23.9 82.3004 23.9ZM90.6513 24.524C90.6513 24.8013 90.5553 25.036 90.3633 25.228C90.1819 25.4093 89.9526 25.5 89.6753 25.5C89.4086 25.5 89.1846 25.4093 89.0033 25.228C88.8219 25.036 88.7313 24.8013 88.7313 24.524V14.636C88.7313 14.3587 88.8219 14.1293 89.0033 13.948C89.1953 13.756 89.4299 13.66 89.7073 13.66C89.9846 13.66 90.2086 13.756 90.3793 13.948C90.5606 14.1293 90.6513 14.3587 90.6513 14.636V24.524ZM94.0038 25.5C93.7264 25.5 93.4971 25.4093 93.3158 25.228C93.1344 25.036 93.0438 24.8013 93.0438 24.524V14.636C93.0438 14.3587 93.1344 14.1293 93.3158 13.948C93.4971 13.756 93.7264 13.66 94.0038 13.66C94.2811 13.66 94.5104 13.756 94.6918 13.948C94.8731 14.1293 94.9638 14.3587 94.9638 14.636V24.524C94.9638 24.8013 94.8731 25.036 94.6918 25.228C94.5104 25.4093 94.2811 25.5 94.0038 25.5ZM99.0918 16.94C99.3371 16.94 99.5504 17.0413 99.7318 17.244C99.9131 17.4467 100.004 17.644 100.004 17.836C100.004 18.092 99.8758 18.332 99.6198 18.556L94.8038 22.988L94.7238 20.78L98.3878 17.244C98.5904 17.0413 98.8251 16.94 99.0918 16.94ZM99.3318 25.484C99.0544 25.484 98.8198 25.3773 98.6278 25.164L95.6678 22.028L97.1238 20.684L100.004 23.82C100.206 24.0333 100.308 24.2733 100.308 24.54C100.308 24.8173 100.196 25.0467 99.9718 25.228C99.7584 25.3987 99.5451 25.484 99.3318 25.484Z"
					fill="black"
					ref={textPath}
				/>
				<rect
					className="lets-talk-btn-outline"
					x="0.5"
					y="0.5"
					width="129"
					height="38"
					rx="19"
					stroke="black"
					ref={outlinePath}
					style={{ strokeDasharray: 310, strokeDashoffset: 310 }}
				/>
			</svg>
			<span
				ref={bg}
				className="absolute -top-full left-0 bg-white w-full h-full mix-blend-difference"
			></span>
		</button>
	);
};

export default ButtonOutline;
